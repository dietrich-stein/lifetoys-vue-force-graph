import{G as O}from"./dat.gui.module.6914edc7.js";import{d as V,a as T,n as b,o as w,g as B,u as L,i as S,j as P}from"./index.264643d6.js";import{f as Z}from"./collide.6bad0132.js";var F={},k={},N=34,D=10,I=13;function M(e){return new Function("d","return {"+e.map(function(t,o){return JSON.stringify(t)+": d["+o+'] || ""'}).join(",")+"}")}function z(e,t){var o=M(e);return function(u,c){return t(o(u),c,e)}}function G(e){var t=Object.create(null),o=[];return e.forEach(function(u){for(var c in u)c in t||o.push(t[c]=c)}),o}function l(e,t){var o=e+"",u=o.length;return u<t?new Array(t-u+1).join(0)+o:o}function W(e){return e<0?"-"+l(-e,6):e>9999?"+"+l(e,6):l(e,4)}function Y(e){var t=e.getUTCHours(),o=e.getUTCMinutes(),u=e.getUTCSeconds(),c=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":W(e.getUTCFullYear())+"-"+l(e.getUTCMonth()+1,2)+"-"+l(e.getUTCDate(),2)+(c?"T"+l(t,2)+":"+l(o,2)+":"+l(u,2)+"."+l(c,3)+"Z":u?"T"+l(t,2)+":"+l(o,2)+":"+l(u,2)+"Z":o||t?"T"+l(t,2)+":"+l(o,2)+"Z":"")}function q(e){var t=new RegExp('["'+e+`
\r]`),o=e.charCodeAt(0);function u(n,r){var f,a,i=c(n,function(h,d){if(f)return f(h,d-1);a=h,f=r?z(h,r):M(h)});return i.columns=a||[],i}function c(n,r){var f=[],a=n.length,i=0,h=0,d,m=a<=0,C=!1;n.charCodeAt(a-1)===D&&--a,n.charCodeAt(a-1)===I&&--a;function y(){if(m)return k;if(C)return C=!1,F;var j,R=i,v;if(n.charCodeAt(R)===N){for(;i++<a&&n.charCodeAt(i)!==N||n.charCodeAt(++i)===N;);return(j=i)>=a?m=!0:(v=n.charCodeAt(i++))===D?C=!0:v===I&&(C=!0,n.charCodeAt(i)===D&&++i),n.slice(R+1,j-1).replace(/""/g,'"')}for(;i<a;){if((v=n.charCodeAt(j=i++))===D)C=!0;else if(v===I)C=!0,n.charCodeAt(i)===D&&++i;else if(v!==o)continue;return n.slice(R,j)}return m=!0,n.slice(R,a)}for(;(d=y())!==k;){for(var E=[];d!==F&&d!==k;)E.push(d),d=y();r&&(E=r(E,h++))==null||f.push(E)}return f}function A(n,r){return n.map(function(f){return r.map(function(a){return p(f[a])}).join(e)})}function U(n,r){return r==null&&(r=G(n)),[r.map(p).join(e)].concat(A(n,r)).join(`
`)}function _(n,r){return r==null&&(r=G(n)),A(n,r).join(`
`)}function s(n){return n.map(g).join(`
`)}function g(n){return n.map(p).join(e)}function p(n){return n==null?"":n instanceof Date?Y(n):t.test(n+="")?'"'+n.replace(/"/g,'""')+'"':n}return{parse:u,parseRows:c,format:U,formatBody:_,formatRows:s,formatRow:g,formatValue:p}}var H=q(","),J=H.parse;const X=V({__name:"tree",setup(e){const t=T(),o=T({"DAG Orientation":"td"}),u=T(),c=T({nodes:[],links:[]});function A(){const s=new O;u.value=s,s.add(o.value,"DAG Orientation",["td","bu","lr","rl","radialout","radialin",null])}function U(){t.value.d3Force("collision",Z(s=>Math.sqrt(100/(s.level+1))))}function _(){fetch(L).then(s=>s.text()).then(J).then(s=>{const g=[],p=[];s.forEach(({size:n,path:r})=>{const f=r.split("/"),a=f.length-1,i=a>0?f[1]:null,h=f.pop(),d=f.join("/"),m={path:r,leaf:h,module:i,size:+n||20,level:a};g.push(m),d&&p.push({source:d,target:r,targetNode:m})}),c.value={nodes:g,links:p}})}return b(()=>{A(),U(),_()}),w(()=>{u.value.destroy()}),(s,g)=>{const p=S("VueForceGraph2D");return P(),B(p,{ref_key:"fgRef",ref:t,graphData:c.value,backgroundColor:"#090723",dagMode:o.value["DAG Orientation"],dagLevelDistance:300,linkColor:()=>"rgba(255,255,255,0.2)",nodeRelSize:1,nodeId:"path",nodeVal:n=>100/(n.level+1),nodeLabel:"path",nodeAutoColorBy:"module",linkDirectionalParticles:2,linkDirectionalParticleWidth:2,d3VelocityDecay:.3},null,8,["graphData","dagMode","linkColor","nodeVal","d3VelocityDecay"])}}});export{X as default};
