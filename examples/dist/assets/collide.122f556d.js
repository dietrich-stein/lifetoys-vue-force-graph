import{I as G}from"./vendor.b8487768.js";function w(r){return function(){return r}}function C(r){return(r()-.5)*1e-6}function H(r){return r.x+r.vx}function J(r){return r.y+r.vy}function L(r){var o,s,m,l=1,j=1;typeof r!="function"&&(r=w(r==null?1:+r));function u(){for(var n,t=o.length,g,i,x,h,p,A,b=0;b<j;++b)for(g=G(o,H,J).visitAfter(I),n=0;n<t;++n)i=o[n],p=s[i.index],A=p*p,x=i.x+i.vx,h=i.y+i.vy,g.visit(M);function M(d,B,D,E,F){var v=d.data,y=d.r,e=p+y;if(v){if(v.index>i.index){var c=x-v.x-v.vx,a=h-v.y-v.vy,f=c*c+a*a;f<e*e&&(c===0&&(c=C(m),f+=c*c),a===0&&(a=C(m),f+=a*a),f=(e-(f=Math.sqrt(f)))/f*l,i.vx+=(c*=f)*(e=(y*=y)/(A+y)),i.vy+=(a*=f)*e,v.vx-=c*(e=1-e),v.vy-=a*e)}return}return B>x+e||E<x-e||D>h+e||F<h-e}}function I(n){if(n.data)return n.r=s[n.data.index];for(var t=n.r=0;t<4;++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r)}function z(){if(!!o){var n,t=o.length,g;for(s=new Array(t),n=0;n<t;++n)g=o[n],s[g.index]=+r(g,n,o)}}return u.initialize=function(n,t){o=n,m=t,z()},u.iterations=function(n){return arguments.length?(j=+n,u):j},u.strength=function(n){return arguments.length?(l=+n,u):l},u.radius=function(n){return arguments.length?(r=typeof n=="function"?n:w(+n),z(),u):r},u}export{L as f};
