import{G as H}from"./vendor.bc4ce3e1.js";function w(r){return function(){return r}}function C(r){return(r()-.5)*1e-6}function I(r){return r.x+r.vx}function J(r){return r.y+r.vy}function L(r){var o,s,m,l=1,j=1;typeof r!="function"&&(r=w(r==null?1:+r));function c(){for(var n,t=o.length,g,i,x,h,p,A,b=0;b<j;++b)for(g=H(o,I,J).visitAfter(G),n=0;n<t;++n)i=o[n],p=s[i.index],A=p*p,x=i.x+i.vx,h=i.y+i.vy,g.visit(M);function M(d,B,D,E,F){var u=d.data,y=d.r,e=p+y;if(u){if(u.index>i.index){var v=x-u.x-u.vx,a=h-u.y-u.vy,f=v*v+a*a;f<e*e&&(v===0&&(v=C(m),f+=v*v),a===0&&(a=C(m),f+=a*a),f=(e-(f=Math.sqrt(f)))/f*l,i.vx+=(v*=f)*(e=(y*=y)/(A+y)),i.vy+=(a*=f)*e,u.vx-=v*(e=1-e),u.vy-=a*e)}return}return B>x+e||E<x-e||D>h+e||F<h-e}}function G(n){if(n.data)return n.r=s[n.data.index];for(var t=n.r=0;t<4;++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r)}function z(){if(!!o){var n,t=o.length,g;for(s=new Array(t),n=0;n<t;++n)g=o[n],s[g.index]=+r(g,n,o)}}return c.initialize=function(n,t){o=n,m=t,z()},c.iterations=function(n){return arguments.length?(j=+n,c):j},c.strength=function(n){return arguments.length?(l=+n,c):l},c.radius=function(n){return arguments.length?(r=typeof n=="function"?n:w(+n),z(),c):r},c}export{L as f};
